distinct()
pol_graph <- tbl_graph(nodes = pol_nodes_extract,
edges = pol_edges,
directed = TRUE)
ggraph(pol_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
sal_wgl_nodes <- as_tibble(sal_wgl$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
sal_wgl_edges <- as_tibble(sal_wgl$links) %>%
select(source, target, valueofgoods_omu, weightkg, hscode, arrivaldate)
# rename columns
sal_wgl_edges <- sal_wgl_edges %>%
rename('Source' = 'source',
'Target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
sal_wgl_nodes <- as_tibble(sal_wgl$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
sal_wgl_edges <- as_tibble(sal_wgl$links) %>%
select(source, target, valueofgoods_omu, weightkg, hscode, arrivaldate)
# rename columns
sal_wgl_edges <- sal_wgl_edges %>%
rename('source' = 'source',
'target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
id1 <- sal_wgl_edges %>%
select(source) %>%
rename(id = source)
id2 <- sal_wgl_edges %>%
select(target) %>%
rename(id = target)
sal_wgl_nodes_extract <- rbind(id1, id2) %>%
distinct()
sal_wgl_graph <- tbl_graph(nodes = sal_wgl_nodes_extract,
edges = sal_wgl_edges,
directed = TRUE)
ggraph(sal_wgl_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
salmon_nodes <- as_tibble(salmon$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
salmon_edges <- as_tibble(salmon$links) %>%
select(source, target, valueofgoods_omu, weightkg, hscode, arrivaldate)
# rename columns
salmon_edges <- salmon_edges %>%
rename('source' = 'source',
'target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
id1 <- salmon_edges %>%
select(source) %>%
rename(id = source)
id2 <- salmon_edges %>%
select(target) %>%
rename(id = target)
salmon_nodes_extract <- rbind(id1, id2) %>%
distinct()
salmon_graph <- tbl_graph(nodes = salmon_nodes_extract,
edges = salmon_edges,
directed = TRUE)
ggraph(salmon_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
MC3 <- fromJSON("data/MC3.json")
View(MC3)
shark_nodes <- as_tibble(shark$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
shark_edges <- as_tibble(shark$links) %>%
select(source, target, valueofgoods_omu, weightkg, hscode, arrivaldate)
# rename columns
shark_edges <- shark_edges %>%
rename('source' = 'source',
'target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
id1 <- shark_edges %>%
select(source) %>%
rename(id = source)
id2 <- shark_edges %>%
select(target) %>%
rename(id = target)
shark_nodes_extract <- rbind(id1, id2) %>%
distinct()
shark_graph <- tbl_graph(nodes = shark_nodes_extract,
edges = shark_edges,
directed = TRUE)
ggraph(shark_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
tuna_nodes <- as_tibble(tuna$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
tuna_edges <- as_tibble(tuna$links) %>%
select(source, target, valueofgoods_omu, hscode, arrivaldate)
# rename columns
tuna_edges <- tuna_edges %>%
rename('Source' = 'source',
'Target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
tuna_nodes <- as_tibble(tuna$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
tuna_edges <- as_tibble(tuna$links) %>%
select(source, target, valueofgoods_omu, hscode, arrivaldate)
# rename columns
tuna_edges <- tuna_edges %>%
rename('source' = 'source',
'target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
id1 <- tuna_edges %>%
select(source) %>%
rename(id = source)
id2 <- tuna_edges %>%
select(target) %>%
rename(id = target)
tuna_nodes_extract <- rbind(id1, id2) %>%
distinct()
tuna_graph <- tbl_graph(nodes = tuna_nodes_extract,
edges = tuna_edges,
directed = TRUE)
ggraph(tuna_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
mc3_data <- fromJSON("data/MC3.json")
View(sal_wgl_edges)
View(sal_wgl_edges)
View(sal_wgl_edges)
View(sal_wgl_edges)
View(carp_edges)
carp_edges_aggregated <- carp_edges %>%
group_by(source,target, HS_code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
carp_edges_aggregated <- carp_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- carp_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- carp_edges_aggregated %>%
select(target) %>%
rename(id = target)
carp_nodes_extract <- rbind(id1, id2) %>%
distinct()
carp_graph <- tbl_graph(nodes = carp_nodes_extract,
edges = carp_edges_aggregated,
directed = TRUE)
ggraph(carp_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(carp_edges_aggregated)
View(carp_edges_aggregated)
View(c_mac_edges)
cmac_edges_aggregated <- cmac_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- cmac_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- cmac_edges_aggregated %>%
select(target) %>%
rename(id = target)
cmac_nodes_extract <- rbind(id1, id2) %>%
distinct()
cmac_graph <- tbl_graph(nodes = cmac_nodes_extract,
edges = cmac_edges_aggregated,
directed = TRUE)
ggraph(cmac_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(cmac_nodes_extract)
View(cmac_edges_aggregated)
View(cod_edges)
cod_edges_aggregated <- cod_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- cod_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- cod_edges_aggregated %>%
select(target) %>%
rename(id = target)
cod_nodes_extract <- rbind(id1, id2) %>%
distinct()
cod_graph <- tbl_graph(nodes = cod_nodes_extract,
edges = cod_edges_aggregated,
directed = TRUE)
ggraph(cod_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(cod_edges_aggregated)
View(catfish_edges)
catfish_edges_aggregated <- catfish_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
catfish_edges_aggregated <- catfish_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
%>%
catfish_edges_aggregated <- catfish_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE)
%>%
ungroup()
catfish_edges_aggregated <- catfish_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE)) %>%
ungroup()
id1 <- catfish_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- catfish_edges_aggregated %>%
select(target) %>%
rename(id = target)
catfish_nodes_extract <- rbind(id1, id2) %>%
distinct()
catfish_graph <- tbl_graph(nodes = catfish_nodes_extract,
edges = catfish_edges_aggregated,
directed = TRUE)
ggraph(catfish_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(catfish_edges_aggregated)
herring_edges_aggregated <- herring_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- herring_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- herring_edges_aggregated %>%
select(target) %>%
rename(id = target)
herring_nodes_extract <- rbind(id1, id2) %>%
distinct()
herring_graph <- tbl_graph(nodes = herring_nodes_extract,
edges = herring_edges_aggregated,
directed = TRUE)
ggraph(herring_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(herring_edges_aggregated)
lichen_edges_aggregated <- lichen_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- lichen_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- lichen_edges_aggregated %>%
select(target) %>%
rename(id = target)
lichen_nodes_extract <- rbind(id1, id2) %>%
distinct()
lichen_graph <- tbl_graph(nodes = lichen_nodes_extract,
edges = lichen_edges_aggregated,
directed = TRUE)
ggraph(lichen_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(lichen_edges_aggregated)
mac_edges_aggregated <- mac_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
View(mac_edges)
mac_edges_aggregated <- mac_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE)) %>%
ungroup()
id1 <- mac_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- mac_edges_aggregated %>%
select(target) %>%
rename(id = target)
mac_nodes_extract <- rbind(id1, id2) %>%
distinct()
mac_graph <- tbl_graph(nodes = mac_nodes_extract,
edges = mac_edges_aggregated,
directed = TRUE)
ggraph(mac_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(mac_edges_aggregated)
id1 <- pol_edges_aggregated %>%
select(source) %>%
rename(id = source)
pol_edges_aggregated <- pol_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- pol_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- pol_edges_aggregated %>%
select(target) %>%
rename(id = target)
pol_nodes_extract <- rbind(id1, id2) %>%
distinct()
pol_graph <- tbl_graph(nodes = pol_nodes_extract,
edges = pol_edges_aggregated,
directed = TRUE)
ggraph(pol_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(pol_edges_aggregated)
salw_nodes <- as_tibble(sal_wgl$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
salw_edges <- as_tibble(sal_wgl$links) %>%
select(source, target, valueofgoods_omu, weightkg, hscode, arrivaldate)
# rename columns
salw_edges <- salw_edges %>%
rename('source' = 'source',
'target' = 'target',
'Value_OMU' = 'valueofgoods_omu',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
salw_edges_aggregated <- salw_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- salw_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- salw_edges_aggregated %>%
select(target) %>%
rename(id = target)
sal_wgl_nodes_extract <- rbind(id1, id2) %>%
distinct()
id1 <- salw_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- salw_edges_aggregated %>%
select(target) %>%
rename(id = target)
sal_wgl_nodes_extract <- rbind(id1, id2) %>%
distinct()
sal_wgl_graph <- tbl_graph(nodes = sal_wgl_nodes_extract,
edges = salw_edges_aggregated,
directed = TRUE)
ggraph(sal_wgl_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(salw_edges_aggregated)
salmon_edges_aggregated <- salmon_edges %>%
group_by(source,target, HS_Code) %>%
summarise(Value_OMU_Total = sum(Value_OMU, na.rm = TRUE),
Count = n(),
Average_OMU = mean(Value_OMU, na.rm = TRUE),
Total_Weight_KG = sum(Weight_KG, na.rm = TRUE),
Average_Weight_KG = mean(Weight_KG, na.rm = TRUE)) %>%
ungroup()
id1 <- salmon_edges_aggregated %>%
select(source) %>%
rename(id = source)
id2 <- salmon_edges_aggregated %>%
select(target) %>%
rename(id = target)
salmon_nodes_extract <- rbind(id1, id2) %>%
distinct()
salmon_graph <- tbl_graph(nodes = salmon_nodes_extract,
edges = salmon_edges_aggregated,
directed = TRUE)
ggraph(salmon_graph,
layout = "fr") +
geom_edge_link(aes()) +
geom_node_point(aes()) +
theme_graph()
View(salmon_edges_aggregated)
View(carp_edges_aggregated)
View(salmon_edges_aggregated)
View(salw_edges_aggregated)
pacman::p_load(igraph, tidygraph, ggraph,
visNetwork, lubridate, clock,
tidyverse, graphlayouts, jsonlite)
MC2 <- fromJSON("data/mc2_challenge_graph.json")
MC2_nodes <- as_tibble(MC2$nodes) %>%
select(id,shpcountry, rcvcountry) #using select function to reorganise into desired order of columns
MC2_edges <- as_tibble(MC2$links) %>%
select(source, target, valueofgoods_omu, valueofgoodsusd, weightkg, hscode, arrivaldate)
MC2_edges <- MC2_edges %>% distinct()
MC2_nodes <- MC2_nodes %>% distinct()
MC2_edges <- MC2_edges %>%
mutate(Month = month(arrivaldate,
label = TRUE,
abbr = FALSE))
# rename columns
MC2_edges <- MC2_edges %>%
rename('Value_OMU' = 'valueofgoods_omu',
'Value_USD' = 'valueofgoodsusd',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
MC2_edges <- MC2_edges %>%
mutate(Month = month(arrivaldate,
label = TRUE,
abbr = FALSE))
View(MC2_edges)
MC2_edges <- MC2_edges %>%
mutate(Month = month(Arrival_Date,
label = TRUE,
abbr = FALSE))
# rename columns
MC2_edges <- MC2_edges %>%
rename('Value_OMU' = 'valueofgoods_omu',
'Value_USD' = 'valueofgoodsusd',
'Weight_KG' = 'weightkg',
'HS_Code' = 'hscode',
'Arrival_Date' = 'arrivaldate')
View(MC2_edges)
pacman::p_load(igraph, tidygraph, ggraph,
visNetwork, lubridate, clock,
tidyverse, graphlayouts, jsonlite)
MC2 <- fromJSON("data/mc2_challenge_graph.json")
MC2 <- fromJSON("data/mc2_challenge_graph.json")
pacman::p_load(igraph, tidygraph, ggraph,
visNetwork, lubridate, clock,
tidyverse, graphlayouts, jsonlite)
MC2 <- fromJSON("data/mc2_challenge_graph.json")
